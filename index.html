<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Comercial Brisanet | Análise de Dados</title>
    <meta name="description" content="Dashboard interativo de análise comercial da Brisanet com insights sobre faturamento, clientes e performance de vendas">
    <meta name="author" content="Gabriel Demetrios Lafis">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/brisanet_logo.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="assets/brisanet_logo.svg" alt="Brisanet">
            </div>
            <div class="loading-spinner"></div>
            <p class="loading-text">Carregando dados...</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="assets/brisanet_logo.svg" alt="Brisanet" class="sidebar-logo">
                <h1 class="sidebar-title">Dashboard<br>Comercial</h1>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" data-section="overview">
                    <i class="fas fa-chart-line"></i>
                    <span>Visão Geral</span>
                </a>
                <a href="#revenue" class="nav-item" data-section="revenue">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Faturamento</span>
                </a>
                <a href="#products" class="nav-item" data-section="products">
                    <i class="fas fa-box"></i>
                    <span>Produtos</span>
                </a>
                <a href="#geography" class="nav-item" data-section="geography">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Geografia</span>
                </a>
                <a href="#customers" class="nav-item" data-section="customers">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </a>
                <a href="#advanced" class="nav-item" data-section="advanced">
                    <i class="fas fa-chart-line"></i>
                    <span>Análises Avançadas</span>
                </a>
                <a href="#insights" class="nav-item" data-section="insights">
                    <i class="fas fa-lightbulb"></i>
                    <span>Insights</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="footer-info">
                    <p class="footer-label">Última Atualização</p>
                    <p class="footer-value" id="last-update">-</p>
                </div>
                <div class="footer-info">
                    <p class="footer-label">Período</p>
                    <p class="footer-value" id="period-range">-</p>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-left">
                    <h2 class="page-title" id="page-title">Visão Geral</h2>
                    <p class="page-subtitle" id="page-subtitle">Principais métricas e indicadores</p>
                </div>
                <div class="header-right">
                    <button class="btn-icon" onclick="refreshData()" title="Atualizar dados">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button class="btn-icon" onclick="exportDashboard()" title="Exportar relatório">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="btn-icon" onclick="toggleFullscreen()" title="Tela cheia">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="content-body">
                <!-- Overview Section -->
                <section id="overview-section" class="content-section active">
                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card primary">
                            <div class="kpi-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Faturamento Total</p>
                                <h3 class="kpi-value" id="kpi-revenue">-</h3>
                                <p class="kpi-change positive" id="kpi-revenue-change">-</p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Total de Vendas</p>
                                <h3 class="kpi-value" id="kpi-sales">-</h3>
                                <p class="kpi-change" id="kpi-sales-change">-</p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-receipt"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Ticket Médio</p>
                                <h3 class="kpi-value" id="kpi-ticket">-</h3>
                                <p class="kpi-change" id="kpi-ticket-change">-</p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Total de Clientes</p>
                                <h3 class="kpi-value" id="kpi-customers">-</h3>
                                <p class="kpi-change" id="kpi-customers-change">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row 1 -->
                    <div class="charts-row">
                        <div class="chart-card large">
                            <div class="chart-header">
                                <h3 class="chart-title">Evolução do Faturamento Mensal</h3>
                                <div class="chart-actions">
                                    <button class="btn-chart-action" title="Mais opções">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-body">
                                <div id="chart-revenue-monthly"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Status de Clientes</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-customer-status"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row 2 -->
                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Top 5 Estados</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-top-states"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Distribuição por Segmento</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-segments"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Revenue Section -->
                <section id="revenue-section" class="content-section">
                    <div class="charts-row">
                        <div class="chart-card large">
                            <div class="chart-header">
                                <h3 class="chart-title">Faturamento Mensal Detalhado</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-revenue-detailed"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Métricas de Faturamento</h3>
                            </div>
                            <div class="chart-body">
                                <div class="metrics-list">
                                    <div class="metric-item">
                                        <span class="metric-label">Média Mensal</span>
                                        <span class="metric-value" id="metric-avg-monthly">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Maior Faturamento</span>
                                        <span class="metric-value" id="metric-max-monthly">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Menor Faturamento</span>
                                        <span class="metric-value" id="metric-min-monthly">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Crescimento Médio</span>
                                        <span class="metric-value" id="metric-growth">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Faturamento por Região</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-revenue-region"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Faturamento por Segmento</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-revenue-segment"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Products Section -->
                <section id="products-section" class="content-section">
                    <div class="charts-row">
                        <div class="chart-card large">
                            <div class="chart-header">
                                <h3 class="chart-title">Análise de Produtos</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-products-analysis"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Participação no Faturamento</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-products-share"></div>
                            </div>
                        </div>
                    </div>

                    <div class="table-card">
                        <div class="table-header">
                            <h3 class="table-title">Detalhamento por Produto</h3>
                        </div>
                        <div class="table-body">
                            <table class="data-table" id="products-table">
                                <thead>
                                    <tr>
                                        <th style="text-align: center; width: 80px;">Ranking</th>
                                        <th>Produto</th>
                                        <th style="text-align: right;">Faturamento</th>
                                        <th style="text-align: right;">Vendas</th>
                                        <th style="text-align: right;">Ticket Médio</th>
                                        <th style="text-align: center; width: 100px;">Variação</th>
                                        <th style="width: 200px;">Performance</th>
                                    </tr>
                                </thead>
                                <tbody id="products-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Geography Section -->
                <section id="geography-section" class="content-section">
                    <div class="charts-row">
                        <div class="chart-card large">
                            <div class="chart-header">
                                <h3 class="chart-title">Faturamento por Estado</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-states-revenue"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Distribuição Regional</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-regional-distribution"></div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card full">
                            <div class="chart-header">
                                <h3 class="chart-title">Top 20 Cidades por Faturamento</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-cities-revenue"></div>
                            </div>
                        </div>
                    </div>

                    <div class="table-card">
                        <div class="table-header">
                            <h3 class="table-title">Detalhamento por Estado</h3>
                        </div>
                        <div class="table-body">
                            <table class="data-table" id="geography-table">
                                <thead>
                                    <tr>
                                        <th style="text-align: center; width: 80px;">Ranking</th>
                                        <th>Estado</th>
                                        <th style="text-align: right;">Faturamento</th>
                                        <th style="text-align: right;">Vendas</th>
                                        <th style="text-align: right;">Clientes</th>
                                        <th style="text-align: center; width: 100px;">Variação</th>
                                        <th style="width: 200px;">Performance</th>
                                    </tr>
                                </thead>
                                <tbody id="geography-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Customers Section -->
                <section id="customers-section" class="content-section">
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Clientes Ativos</p>
                                <h3 class="kpi-value" id="kpi-active-customers">-</h3>
                                <p class="kpi-change" id="kpi-active-change">-</p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-user-times"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Taxa de Churn</p>
                                <h3 class="kpi-value" id="kpi-churn">-</h3>
                                <p class="kpi-change negative" id="kpi-churn-change">-</p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-birthday-cake"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Idade Média</p>
                                <h3 class="kpi-value" id="kpi-avg-age">-</h3>
                                <p class="kpi-change" id="kpi-age-change">-</p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Renda Média</p>
                                <h3 class="kpi-value" id="kpi-avg-income">-</h3>
                                <p class="kpi-change" id="kpi-income-change">-</p>
                            </div>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Distribuição por Faixa Etária</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-age-distribution"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Distribuição por Gênero</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-gender-distribution"></div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Clientes por Segmento</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-customers-segment"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Top 10 Vendedores</h3>
                            </div>
                            <div class="chart-body">
                                <div id="chart-top-sellers"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Advanced Analytics Section -->
                <section id="advanced-section" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">📊 Análises Avançadas</h2>
                        <p class="section-subtitle">Visualizações complexas e insights profundos</p>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card full">
                            <div class="chart-header">
                                <h3 class="chart-title">Heatmap de Performance de Produtos</h3>
                                <p class="chart-subtitle">Evolução mensal do faturamento por produto</p>
                            </div>
                            <div class="chart-body">
                                <div id="chart-heatmap-products"></div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Treemap de Faturamento</h3>
                                <p class="chart-subtitle">Distribuição hierárquica proporcional</p>
                            </div>
                            <div class="chart-body">
                                <div id="chart-treemap-revenue"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Sunburst Hierárquico</h3>
                                <p class="chart-subtitle">Visão multinível do negócio</p>
                            </div>
                            <div class="chart-body">
                                <div id="chart-sunburst"></div>
                            </div>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-card large">
                            <div class="chart-header">
                                <h3 class="chart-title">Waterfall de Composição</h3>
                                <p class="chart-subtitle">Como cada produto contribui para o total</p>
                            </div>
                            <div class="chart-body">
                                <div id="chart-waterfall"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Medidores de Performance</h3>
                                <p class="chart-subtitle">KPIs em formato gauge</p>
                            </div>
                            <div class="chart-body">
                                <div id="gauge-churn" style="margin-bottom: 20px;"></div>
                                <div id="gauge-satisfaction"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Insights Section -->
                <section id="insights-section" class="content-section">
                    <div class="insights-grid">
                        <div class="insight-card priority-high">
                            <div class="insight-header">
                                <i class="fas fa-exclamation-triangle"></i>
                                <h3>Alta Prioridade</h3>
                            </div>
                            <div class="insight-body">
                                <h4>Taxa de Churn Requer Atenção</h4>
                                <p>Com 15,3% de churn, há oportunidade de implementar programa proativo de retenção que pode recuperar R$ 1,5M+ em receita anual.</p>
                                <div class="insight-actions">
                                    <button class="btn-insight">Ver Detalhes</button>
                                </div>
                            </div>
                        </div>

                        <div class="insight-card priority-medium">
                            <div class="insight-header">
                                <i class="fas fa-chart-line"></i>
                                <h3>Oportunidade</h3>
                            </div>
                            <div class="insight-body">
                                <h4>Potencial de Upselling</h4>
                                <p>Fibra 300MB é o produto mais vendido. Campanha de upgrade para planos superiores pode aumentar ARPU em 15-20%.</p>
                                <div class="insight-actions">
                                    <button class="btn-insight">Ver Detalhes</button>
                                </div>
                            </div>
                        </div>

                        <div class="insight-card priority-low">
                            <div class="insight-header">
                                <i class="fas fa-lightbulb"></i>
                                <h3>Insight</h3>
                            </div>
                            <div class="insight-body">
                                <h4>Expansão Geográfica</h4>
                                <p>São Paulo e Brasília lideram em faturamento. Cidades adjacentes apresentam oportunidades de expansão com ROI 25%+.</p>
                                <div class="insight-actions">
                                    <button class="btn-insight">Ver Detalhes</button>
                                </div>
                            </div>
                        </div>

                        <div class="insight-card priority-medium">
                            <div class="insight-header">
                                <i class="fas fa-users"></i>
                                <h3>Performance</h3>
                            </div>
                            <div class="insight-body">
                                <h4>Padronização de Vendas</h4>
                                <p>Variação significativa entre vendedores. Treinamento estruturado pode elevar performance média em 10-15%.</p>
                                <div class="insight-actions">
                                    <button class="btn-insight">Ver Detalhes</button>
                                </div>
                            </div>
                        </div>

                        <div class="insight-card priority-high">
                            <div class="insight-header">
                                <i class="fas fa-trophy"></i>
                                <h3">Destaque</h3>
                            </div>
                            <div class="insight-body">
                                <h4>Crescimento Consistente</h4>
                                <p>Faturamento médio mensal de R$ 118K demonstra crescimento sólido. Base de 15.000 clientes oferece economia de escala.</p>
                                <div class="insight-actions">
                                    <button class="btn-insight">Ver Detalhes</button>
                                </div>
                            </div>
                        </div>

                        <div class="insight-card priority-low">
                            <div class="insight-header">
                                <i class="fas fa-shield-alt"></i>
                                <h3>Risco</h3>
                            </div>
                            <div class="insight-body">
                                <h4>Concentração Regional</h4>
                                <p>Forte dependência de poucos estados. Diversificação geográfica pode reduzir riscos e aumentar resiliência.</p>
                                <div class="insight-actions">
                                    <button class="btn-insight">Ver Detalhes</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="recommendations-card">
                        <div class="recommendations-header">
                            <h3><i class="fas fa-tasks"></i> Recomendações Estratégicas</h3>
                        </div>
                        <div class="recommendations-body">
                            <div class="recommendation-item">
                                <div class="recommendation-number">1</div>
                                <div class="recommendation-content">
                                    <h4>Programa de Retenção Proativa</h4>
                                    <p>Implementar sistema de early warning para clientes em risco, com ações personalizadas de retenção.</p>
                                    <span class="recommendation-impact">Impacto: Alto | Prazo: Curto (0-6 meses)</span>
                                </div>
                            </div>

                            <div class="recommendation-item">
                                <div class="recommendation-number">2</div>
                                <div class="recommendation-content">
                                    <h4>Campanha de Upselling Direcionada</h4>
                                    <p>Migração de clientes Fibra 300MB para planos superiores com ofertas limitadas e benefícios tangíveis.</p>
                                    <span class="recommendation-impact">Impacto: Alto | Prazo: Curto (0-6 meses)</span>
                                </div>
                            </div>

                            <div class="recommendation-item">
                                <div class="recommendation-number">3</div>
                                <div class="recommendation-content">
                                    <h4>Expansão Geográfica Estratégica</h4>
                                    <p>Priorizar cidades adjacentes aos mercados atuais, otimizando CAPEX e aproveitando infraestrutura.</p>
                                    <span class="recommendation-impact">Impacto: Médio | Prazo: Médio (6-12 meses)</span>
                                </div>
                            </div>

                            <div class="recommendation-item">
                                <div class="recommendation-number">4</div>
                                <div class="recommendation-content">
                                    <h4>Padronização de Performance de Vendas</h4>
                                    <p>Implementar playbooks e treinamento estruturado para elevar performance média da equipe.</p>
                                    <span class="recommendation-impact">Impacto: Médio | Prazo: Curto (0-6 meses)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Custom JavaScript -->
    <script src="js/sparklines.js"></script>
    <script src="js/tables_enhanced.js"></script>
    <script src="js/advanced_charts.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
